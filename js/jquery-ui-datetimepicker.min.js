(function(d){d.widget("ui.datetimepicker",{options:{dateOptions:{},timeOptions:{format:"24h"}},_create:function(){var a=this.element,j=this,k,l,h,b,e,g,c,f,i;a.addClass("ui-state-default ui-corner-all ui-datetimepicker-input");d(a).wrap('<div class="ui-widget ui-datetimepicker" />');h=a.parent();k=d('<span class="ui-icon ui-icon-calculator ui-datetimepicker-button"></span>').appendTo(a.parent()).button();l=d('<span class="ui-icon ui-icon-clock ui-datetimepicker-button"></span>').appendTo(a.parent()).button();
g=d('<input class="ui-state-default ui-corner-all ui-datetimepicker-date" id="'+a.attr("id")+'-date" type="text" />');if(f=a.attr("name"))g.attr("name",f+"-date"),a.attr("name",f+"-time");g.datepicker(j.options.dateOptions);h.prepend(g);b=d("<select />");if("24h"===j.options.timeOptions.format){for(c=1;24>c;c++)b.append("<option>"+c+":00</option>"),b.append("<option>"+c+":30</option>");b.append("<option>00:00</option>");b.append("<option>00:30</option>")}else{b.append("<option>12:00 AM</option>");
b.append("<option>12:30 AM</option>");for(c=1;24>c;c++)f=c,i="AM",12<c&&(f=c-12,i="PM"),b.append("<option>"+f+":00 "+i+"</option>"),b.append("<option>"+f+":30 "+i+"</option>")}e=d('<div class="ui-widget-content ui-timepicker-container ui-corner-all" />');e.position({of:a,my:"left top",at:"left bottom"}).append('<div class="ui-widget-header ui-timepicker-header ui-corner-all">Time</div>').append(b);h.append(e);e.hide();a.bind("focus",function(){e.fadeIn("fast")});k.bind("click",function(){g.datepicker("show")});
l.bind("click",function(){e.fadeToggle("fast")});d(document).mouseup(function(a){0===e.has(a.target).length&&j.element[0]!==a.target&&e.fadeOut("fast")});b.bind("change",function(){e.fadeOut("fast");a.val(h.find("select").val())})},getDatetime:function(){var a=this.element.parent().find(".ui-datetimepicker-date").val(),d=this.element.val();return a+" "+d}})})(jQuery);