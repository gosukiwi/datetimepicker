(function(b){b.widget("ui.datetimepicker",{options:{dateOptions:{},timeOptions:{format:"24h"}},_create:function(){var a=this.element,h=this,l,m,i,c,e,g,d,f,j,k;a.addClass("ui-state-default ui-corner-all ui-datetimepicker-input");b(a).wrap('<div class="ui-widget ui-datetimepicker" />');i=a.parent();l=b('<span class="ui-icon ui-icon-calculator ui-datetimepicker-button"></span>').appendTo(a.parent()).button();m=b('<span class="ui-icon ui-icon-clock ui-datetimepicker-button"></span>').appendTo(a.parent()).button();
g=b('<input class="ui-state-default ui-corner-all ui-datetimepicker-date" id="'+a.attr("id")+'-date" type="text" />');if(f=a.attr("name"))k=b('<input type="hidden" name="'+f+'" />'),g.attr("name",f+"-date"),a.attr("name",f+"-time"),i.append(k);g.datepicker(h.options.dateOptions);i.prepend(g);c=b("<select />");if("24h"===h.options.timeOptions.format){for(d=1;24>d;d++)c.append("<option>"+d+":00</option>"),c.append("<option>"+d+":30</option>");c.append("<option>00:00</option>");c.append("<option>00:30</option>")}else{c.append("<option>12:00 AM</option>");
c.append("<option>12:30 AM</option>");for(d=1;24>d;d++)f=d,j="AM",12<d&&(f=d-12,j="PM"),c.append("<option>"+f+":00 "+j+"</option>"),c.append("<option>"+f+":30 "+j+"</option>")}e=b('<div class="ui-widget-content ui-timepicker-container ui-corner-all" />');e.position({of:a,my:"left top",at:"left bottom"}).append('<div class="ui-widget-header ui-timepicker-header ui-corner-all">Time</div>').append(c);i.append(e);e.hide();a.bind("focus",function(){e.fadeIn("fast")});g.bind("change",function(){k.val(h.getDatetime())});
l.bind("click",function(){g.datepicker("show")});m.bind("click",function(){e.fadeToggle("fast")});b(document).mouseup(function(a){0===e.has(a.target).length&&h.element[0]!==a.target&&e.fadeOut("fast")});c.bind("change",function(){e.fadeOut("fast");a.val(i.find("select").val());k.val(h.getDatetime())})},getDatetime:function(){var a=this.element.parent().find(".ui-datetimepicker-date").val(),b=this.element.val();return a+" "+b}})})(jQuery);